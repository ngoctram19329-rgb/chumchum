<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin</title>
</head>
<body style="font-family:Arial;padding:30px;">

<h2>Danh sách đơn hàng</h2>
<div id="orders"></div>

<script>
const BACKEND = "https://chumchum-backend-2.onrender.com";

function loadOrders() {
  fetch(BACKEND + "/orders")
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById("orders");
    container.innerHTML = "";

    data.forEach(order => {
      container.innerHTML += `
        <div style="border:1px solid #ccc;padding:10px;margin-bottom:10px;">
          <strong>ID:</strong> ${order.id}<br>
          <strong>Tên:</strong> ${order.name}<br>
          <strong>SĐT:</strong> ${order.phone}<br>
          <strong>Sản phẩm:</strong> ${order.product}<br>
          <strong>Giá:</strong> ${order.price}đ<br>
          <strong>Trạng thái:</strong> ${order.status}<br>
          ${order.status === "pending" ?
            `<button onclick="approve(${order.id})">Duyệt</button>` : ""}
        </div>
      `;
    });
  });
}

function approve(id) {
  fetch(BACKEND + "/approve-order/" + id, { method: "POST" })
  .then(() => loadOrders());
}

loadOrders();
setInterval(loadOrders, 5000);
</script>

</body>
</html>
